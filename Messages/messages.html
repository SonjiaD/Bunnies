<!DOCTYPE html>
<html lang="en">
<head>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;700&family=Poppins:wght@300;400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../beforeLoginHomePage/beforeLoginStyleSheet.css">
  <link rel="stylesheet" href="../stylesheet.css">
  <link rel="stylesheet" href="../stylesheet.css">
  <link rel="stylesheet" href="messagesheet.css">
  <link rel="stylesheet" href="messagesheetCover.css">
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
  <title>Messaging</title>
</head>
<body>
  <!-- <div id="afterLogin-placeholder"></div> -->
  <!-- <script>
    $(document).ready(function () {
      $("#afterLogin-placeholder").load("../../afterLogin.html");
    });
  </script> -->

  <nav>
    <div class="logo"><b>Bunnies</b></div>
    <ul class="nav-links">
        <li><a href="../afterLoginHomePage/afterLoginHome.html">Home</a></li>
        <li><a href="../Journal/journal.html">My Journal</a></li>
        <li><a href="../Messages/messages.html">Messages</a></li>
        <li><a href="../match/match.html">Match</a></li>
        <li><a href="../Resources/resources.html">Resources</a></li>
        <li><a href="../Profile/profile.html">Profile</a></li>
    </ul>
</nav>

  <div class="rectangle-container">
    <div class="rectangle-content">
      <h1>Messaging</h1>
      <br><br>
      <div>
        <div class="description">
          <div class="text">
            <h2>Make friends</h2>
            <p>Connect with others who understand your journey. Build meaningful friendships and find comfort in shared experiences.</p>
          </div>
        </div>
        <br>
        <div class="description">
          <div class="text">
            <h2>Chat with others</h2>
            <p>Engage in honest conversations, share your thoughts, and provide or receive support in a safe and compassionate space.</p>
          </div>
        </div>
      </div>
    </div>
    <img src="../images/MessagesBunny.svg" alt="Journal Bunny" class="bunny-image">
  </div>

  <!-- Main Container -->
  <div class="container">
    <!-- User List -->
    <div class="user-list">
      <ul>
        <li data-user="user1">Emily</li>
        <li data-user="user2">Richard</li>
        <li data-user="user3">Callum</li>
        <li data-user="user4">Ester</li>
      </ul>
    </div>

    <!-- Chat Container -->
    <div class="chat-container">
      <!-- Header Section -->
      <div class="msg-header">
        <div class="container1">
          <img src="/images/user2.png" alt="pfp" class="msgimg">
          <div class="active">
            <p>Emily</p>
          </div>
        </div>
      </div>

      <!-- Chat Messages -->
      <div class="msg-inbox" id="chatBox"> <!-- ID added for JS -->
        <div class="chats">
          <div class="msg-page">
            <!-- Received Message -->
            <div class="received-chats">
              <div class="received-chats-img">
                <img src="/images/user2.png" alt="User 2" class="profile-pic">
              </div>
              <div class="receiveds-msg">
                <div class="received-msg-inbox">
                  <p>Hey! How's it going? Just wanted to check in :)</p>
                  <span class="time">Today 11:55</span>
                </div>
              </div>
            </div>

            <!-- Sent Message -->
            <div class="outgoing-chats">
              <div class="outgoing-chats-img">
                <img src="/images/user1.png" alt="User 1" class="profile-pic">
              </div>
              <div class="outgoing-msg">
                <div class="outgoing-chats-msg">
                  <p>Oh you know ':) midterms</p>
                  <p>Wbu? How's your new job?</p>
                  <span class="time">Today 1:03</span>
                </div>
              </div>
            </div>

            <!-- Another Received Message -->
            <div class="received-chats">
              <div class="received-chats-img">
                <img src="/images/user2.png" alt="User 2" class="profile-pic">
              </div>
              <div class="received-msg">
                <div class="received-msg-inbox">
                  <p>Midterms are the worst! But I'm sure you'll do great.</p>
                  <span class="time">Today 2:00</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Message Input Section -->
      <div class="msg-bottom">
        <div class="input-group">
          <input type="text" id="messageInput" class="form-control" placeholder="Say hi!"> <!-- ID added for JS -->
          <div class="input-group-append">
            <span class="input-group-text send-icon" id="sendButton"><i class="bi bi-send"></i></span> <!-- ID added for JS -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // JavaScript to handle sending messages and displaying them
    document.getElementById('sendButton').addEventListener('click', sendMessage);
    document.getElementById('messageInput').addEventListener('keydown', function (event) {
        if (event.key === 'Enter') {
            sendMessage();
        }
    });

    function sendMessage() {
        const messageInput = document.getElementById('messageInput');
        const message = messageInput.value.trim();

        if (message) {
            displayMessage(message);
            messageInput.value = ''; // Clear the input field
        }
    }

    function displayMessage(message) {
        const chatBox = document.getElementById('chatBox');
        
        // Create new message bubble for sent message
        const outgoingChat = document.createElement('div');
        outgoingChat.classList.add('outgoing-chats');
        
        const outgoingMsg = document.createElement('div');
        outgoingMsg.classList.add('outgoing-msg');
        
        const outgoingChatsMsg = document.createElement('div');
        outgoingChatsMsg.classList.add('outgoing-chats-msg');
        outgoingChatsMsg.style.backgroundColor = 'pink'; // Set background to pink for user messages
        
        const messageText = document.createElement('p');
        messageText.textContent = message;
        outgoingChatsMsg.appendChild(messageText);
        
        outgoingMsg.appendChild(outgoingChatsMsg);
        outgoingChat.appendChild(outgoingMsg);
        
        chatBox.appendChild(outgoingChat);
        chatBox.scrollTop = chatBox.scrollHeight; // Scroll to the bottom
    }

    function displayMessage(message) {
    const chatBox = document.getElementById('chatBox');
    
    // Create new message bubble for sent message
    const outgoingChat = document.createElement('div');
    outgoingChat.classList.add('outgoing-chats');

    // Profile image container
    const outgoingChatsImg = document.createElement('div');
    outgoingChatsImg.classList.add('outgoing-chats-img');

    const profileImg = document.createElement('img');
    profileImg.src = "/images/user1.png"; // Path to the profile image
    profileImg.alt = "User 1";
    profileImg.classList.add('profile-pic');
    outgoingChatsImg.appendChild(profileImg);

    outgoingChat.appendChild(outgoingChatsImg);

    // Message text container
    const outgoingMsg = document.createElement('div');
    outgoingMsg.classList.add('outgoing-msg');
    
    const outgoingChatsMsg = document.createElement('div');
    outgoingChatsMsg.classList.add('outgoing-chats-msg');
    outgoingChatsMsg.style.backgroundColor = 'white'; // Set background to pink for user messages
    
    const messageText = document.createElement('p');
    messageText.textContent = message;
    outgoingChatsMsg.appendChild(messageText);

    // Time stamp
    const timeSpan = document.createElement('span');
    timeSpan.classList.add('time');
    const currentTime = new Date();
    timeSpan.textContent = `${currentTime.getHours()}:${String(currentTime.getMinutes()).padStart(2, '0')}`;
    outgoingChatsMsg.appendChild(timeSpan);

    outgoingMsg.appendChild(outgoingChatsMsg);
    outgoingChat.appendChild(outgoingMsg);

    chatBox.appendChild(outgoingChat);
    chatBox.scrollTop = chatBox.scrollHeight; // Scroll to the bottom
}

  </script>
</body>
</html>
